<!DOCTYPE html>
<html>
<head>
    <title>How to Migrate from Resources Plugin to Asset-Pipeline</title>
    <meta name="keywords" content="grails,jvm,framework,groovy,gradle,spring-boot,gorm" />
    <meta name="description" content="Migrate from resources plugin to asset-pipeline in the Grails® framework" />
    <meta name="date" content="September 12, 2016" />
    <meta name="robots" content="all"/>
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://grails.org/rss.xml" />
    <meta charset='UTF-8' />
    <link rel='icon' href='https://grails.org/images/favicon.ico'/>
    <meta name='twitter:card' content='summary_large_image'/>
    <meta name='twitter:site' content='@grailsframework'/>
    <meta name='twitter:description' content='Migrate from resources plugin to asset-pipeline in the Grails® framework'/>
    <meta name='twitter:creator' content='@grailsframework'/>
    <meta property='og:image' content='https://grails.org/images/grails.png'/>
    <meta property='og:image:width' content='300'/>
    <meta property='og:image:height' content='300'/>
    <meta property='og:url' content='https://grails.org'/>
    <meta property='og:title' content='How to Migrate from Resources Plugin to Asset-Pipeline'/>
    <meta property='og:description' content='Migrate from resources plugin to asset-pipeline in the Grails® framework'/>
    <meta property='og:type' content='website'/>

    <meta name='viewport' content='width=device-width, initial-scale=1' />
    <link rel='mask-icon' href='https://grails.org/images/grails-pinned-icon.svg' color='feb672' />
    <link rel='stylesheet' href='https://grails.org/stylesheets/screen.css' />
    <script src='https://grails.org/javascripts/navigation.js'></script>
    
    
    
</head>
<body><header class='mainheader'>
    <div class='content'>
        <a href='https://grails.org/index.html'><img class='grailslogo' src='https://grails.org/images/grails_logo.svg' alt='Grails Logo' /></a>
        <a href='javascript:show(&apos;topmenus&apos;, &apos;showNavigationLink&apos;)' id='showNavigationLink' class='mobile align-center'>Show Navigation</a>
        <div id='topmenus'>
            <nav class='secondarymenu' id='secondarymenu'><ul>
                <li><a href='https://grails.org/blog/index.html'>Blog</a></li>
                <li><a href='https://grails.org/learning.html'>Learning</a></li>
                <li><a href='https://grails.org/community.html'>Community</a></li>
                <li><a href='https://grails.org/search.html'>Search</a></li>
            </ul></nav>
            <nav class='mainmenu' id='mainmenu'><ul>
                <li><a href='https://grails.org/documentation.html'>Documentation</a></li>
                <li><a href='https://grails.org/download.html'>Download</a></li>
                <li><a href='https://plugins.grails.org'>Plugins</a></li>
                <li><a href='https://guides.grails.org/index.html'>Guides</a></li>
                <li><a href='https://grails.org/foundation/index.html'>Foundation</a></li>
                <li><a href='https://grails.org/faq.html'>FAQ</a></li>
                <li><a href='https://grails.org/support.html'>Support</a></li>
            </ul></nav>
        </div>
    </div>
</header>
<article><div class='headerbar chalicesbg'>
  <div class='content'>
    <h1>
      <a href='https://grails.org/blog/index.html'>Grails Blog</a>
    </h1>
  </div>
</div>
<div class='content container'>
  <div class='light padded blogpost'><h1>How to Migrate from Resources Plugin to Asset-Pipeline</h1>
<p><span class="author">By Iván López</span></p>
<p><span class="date">September 12, 2016</span></p>
<p>Tags: <a href="https://grails.org/blog/tag/plugins.html"><span class="hashtag">#plugins</span></a></p>
<h2>Introduction</h2>
<p>Since Grails<sup>®</sup> 2.4.0, <a href="https://grails.org/plugin/asset-pipeline">asset-pipeline</a> has been the default plugin recommended to manage the static resources in a Grails application. In earlier versions of the Grails framework, the <a href="https://github.com/grails-plugins/grails-resources">resources</a> plugin was an option, but with Grails 3, the only viable option is using asset-pipeline because resources is not available in Grails 3.</p>
<p>If you want to know how to migrate from resources to asset-pipeline, this post is for you.</p>
<h2>Let's Migrate!</h2>
<p>I recommend you start the migration analyzing your layouts because probably those files contain most of your static resources (javascripts and css files). Imagine that the content of your <code>main.gsp</code> layout is the following:</p>
<pre><code class="language-html">&lt;link rel=&quot;stylesheet&quot; href=&quot;${resource(dir: 'assets/css', file:'bootstrap.min.css') }&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;${resource(dir: 'assets/css', file:'jquery-ui-1.10.3.full.min.css') }&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;${resource(dir: 'assets/css', file:'jquery-ui-1.10.3.custom.min.css') }&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;${resource(dir: 'assets/css', file:'jquery.gritter.css') }&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;${resource(dir: 'assets/css', file:'ui.jqgrid.css') }&quot; /&gt;

&lt;script src=&quot;${resource(dir:'assets/js', file:'bootstrap.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery-2.0.3.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery-ui-1.10.3.custom.min.js') }&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery-ui-1.10.3.full.min.js') }&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.mobile.custom.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.slimscroll.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.gritter.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.hotkeys.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.easy-pie-chart.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.maskedinput.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.dataTables.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'jquery.dataTables.bootstrap.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js/jqGrid', file:'jquery.jqGrid.min.js')}&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;${resource(dir:'assets/js/jqGrid/i18n', file:'grid.locale-en.js')}&quot;&gt;&lt;/script&gt;
</code></pre>
<p>As you can see, there are a bunch of css and javascript files that are mostly related to jQuery, but all of those files are on the same directory. When doing the migration, we're also going to reorganize the files in a better way.</p>
<p>By default, asset-pipeline creates the directories <code>images</code>, <code>javascripts</code>, and <code>stylesheets</code> under <code>grails-app/assets</code> directory. Any file you copy into those directories can be served by the plugin. The easy way would be to copy all of the css and javascript files to those directories and change the way we import the resources.</p>
<p>For example, with the following directory structure:</p>
<pre><code class="language-bash">.
├── javascripts
│   └── bootstrap.min.js
└── stylesheets
    └── bootstrap.min.css
</code></pre>
<p>You could replace the following code:</p>
<pre><code class="language-html">&lt;!-- Using resources --&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;${resource(dir: 'assets/css', file:'bootstrap.min.css') }&quot; /&gt;
&lt;script src=&quot;${resource(dir:'assets/js', file:'bootstrap.min.js')}&quot;&gt;&lt;/script&gt;
</code></pre>
<p>With this one:</p>
<pre><code class="language-html">&lt;!-- Using asset-pipeline --&gt;
&lt;asset:stylesheet src=&quot;bootstrap.min&quot; &gt;&lt;/asset:stylesheet&gt;
&lt;asset:javascript src=&quot;bootstrap.min&quot; &gt;&lt;/asset:javascript&gt;
</code></pre>
<p>Please notice that you don't need to include the <code>.js</code> or <code>.css</code> extension because asset-pipeline will add it when looking for the files in those directories.</p>
<p>As I said, you could just copy all those files and create a lot of entries in your layout using <code>asset:stylesheet</code> and <code>asset:javascript</code>, but we can do it better.</p>
<h2>Defining Bundles</h2>
<p>If you take a look at the content of the <code>grails-app/assets</code> directory created by default, you can find the files <code>application.js</code> and <code>aplication.css</code>.</p>
<p>Let's take a look at the content of the <code>application.css</code> file:</p>
<pre><code class="language-css">/*
* This is a manifest file that'll be compiled into application.css, which will include all the files
* listed below.
*
* Any CSS file within this directory can be referenced here using a relative path.
*
* You're free to add application-wide styles to this file and they'll appear at the top of the
* compiled file, but it's generally better to create a new file per style scope.
*
*= require bootstrap
*= require grails
*= require main
*= require mobile
*= require_self
*/
</code></pre>
<p>We're defining a bundle called <code>application</code> (the name of the file) that will contain <code>bootstrap</code>, <code>grails</code>, <code>main</code>, and <code>mobile</code> stylesheet files. Starting with that we're going to add the rest of the original files we were using with resources plugin:</p>
<pre><code class="language-css">/*
*= require bootstrap.min
*= require jquery/css/jquery-ui-1.10.3.full.min
*= require jquery/css/jquery-ui-1.10.3.custom.min
*= require jquery/css/jquery.gritter
*= require jqGrid/ui.jqgrid
*/
</code></pre>
<p>You can create arbitrary bundles of your js and css files, defining files in the root of those directories and declaring the files you want to add to that bundle. Now we're going the create a bundle for the javascript files:</p>
<pre><code class="language-javascript">//
// require bootstrap.min
//= require jquery/js/jquery-2.0.3.min
//= require jquery/js/jquery-ui-1.10.3.custom.min
//= require jquery/js/jquery-ui-1.10.3.full.min
//= require jquery/js/jquery.mobile.custom.min
//= require jquery/js/jquery.slimscroll.min
//= require jquery/js/jquery.gritter.min
//= require jquery/js/jquery.hotkeys.min
//= require jquery/js/jquery.easy-pie-chart.min
//= require jquery/js/jquery.maskedinput.min
//= require jquery/js/jquery.dataTables.min
//= require jquery/js/jquery.dataTables.bootstrap

//= require jqGrid/jquery.jqGrid.min
//= require jqGrid/i18n/grid.locale-en
</code></pre>
<p>With these two bundles defined, the only thing you need to do is replace all those javascript and stylesheet imports in your layout with the following lines:</p>
<pre><code class="language-html">&lt;asset:stylesheet src=&quot;application&quot; &gt;&lt;/asset:stylesheet&gt;
&lt;asset:javascript src=&quot;application&quot; &gt;&lt;/asset:javascript&gt;
</code></pre>
<p>Now we can run the application, open the inspector and see what happens:</p>
<p><img src="2016-09-12-img01.jpg" alt="Javascripts" /></p>
<p><img src="2016-09-12-img02.jpg" alt="Stylesheets" /></p>
<p>All the javascript and css files are loaded in debug mode. This means that the resources won't be optimized and you'll have hot-reloading of the changes. This is the default behavior during development. For production all files will be minified and included in one file per bundle:</p>
<p><img src="2016-09-12-img03.jpg" alt="assets-minifies-prod" /></p>
<h2>Organizing Bundles</h2>
<p>One last thing about organizing the bundles is that if we want to create our custom directories, we need to create a top level directory in <code>grails-app/assets</code>, and inside that directory, we can create our arbitrary structure. I've named this directory <code>libs</code>, but you can use the name you want:</p>
<pre><code class="language-bash">.
├── javascripts
│   ├── application.js
│   └── bootstrap.min.js
├── libs
│   ├── jqGrid
│   │   ├── i18n
│   │   │   └── grid.locale-en.js
│   │   ├── jquery.jqGrid.min.js
│   │   └── ui.jqgrid.css
│   └── jquery
│       ├── css
│       │   ├── jquery.gritter.css
│       │   ├── jquery-ui-1.10.3.custom.min.css
│       │   └── jquery-ui-1.10.3.full.min.css
│       └── js
│           ├── jquery-2.0.3.min.js
│           ├── jquery.dataTables.bootstrap.js
│           ├── jquery.dataTables.min.js
│           ├── jquery.easy-pie-chart.min.js
│           ├── jquery.gritter.min.js
│           ├── jquery.hotkeys.min.js
│           ├── jquery.maskedinput.min.js
│           ├── jquery.mobile.custom.min.js
│           ├── jquery.slimscroll.min.js
│           ├── jquery-ui-1.10.3.custom.min.js
│           └── jquery-ui-1.10.3.full.min.js
└── stylesheets
    ├── application.css
    └── bootstrap.min.css
</code></pre>
<p>Effectively, asset-pipeline treats each of the subdirectories of <code>grails-app/assets</code> as another root for locating assets.</p>
<h2>Conclusion</h2>
<p>As you have seen in this post, it's pretty simple to organize the static resources using asset-pipeline plugin and migrate from resources.</p>
<p>If you want to take a closer look to the code, this example application is available <a href="https://github.com/ilopmar/example-asset-pipeline">here</a>.</p>
    <h2 class='space-above'>
      <span>You might also like ...</span>
    </h2>
    <div class='threecolumns'>
      <div class='column'><article class='blogcard' style='background-image: url(https://grails.org/images/grails-blog-index-6.png)'>
  <a href='https://grails.org/blog/2021-04-07-publish-grails-plugin-to-maven-central.html'>
    <h3>April 7, 2021</h3>
    <h2>How to Publish a Grails Plugin to the Maven C...</h2>
  </a>
</article></div>
      <div class='column'><article class='blogcard' style='background-image: url(https://grails.org/images/grails-blog-index-5.png)'>
  <a href='https://grails.org/blog/2021-02-12-alerts-regarding-bintray-sunset.html'>
    <h3>February 12, 2021</h3>
    <h2>Important Information Regarding Grails and Bi...</h2>
  </a>
</article></div>
      <div class='column'><article class='blogcard' style='background-image: url(https://grails.org/images/2018-09-23.jpg)'>
  <a href='https://grails.org/blog/2018-09-23.html'>
    <h3>September 23, 2018</h3>
    <h2>Security Vulnerability in Asset-Pipeline and ...</h2>
  </a>
</article></div>
    </div>
  </div>
</div>&nbsp;</article>
<footer>
    <div class='content'>
        <div class='ocihometograils'>
            <span style="margin-bottom:12px;">Sponsored by</span>
            <a href='https://objectcomputing.com/products/grails/'><img class='' src='https://grails.org/images/oci-logo.svg' alt='Object Computing is proud to be home to the Grails framework' width='300px' /></a>
            <span style="margin-top:22px;">&copy; 2021 Grails Foundation. All rights reserved.</span>
        </div>
        <nav class='socialmedianav'><ul>
            <li>
                <a href='https://slack.grails.org'><img class='' src='https://grails.org/images/slack.svg' alt='Slack Icon' /></a>
            </li>
            <li>
                <a href='https://www.youtube.com/watch?v=XnRNfDGkBVg&amp;list=PLI74De5M9T73uH3WilDCePP2qfSDpMaGu'><img class='' src='https://grails.org/images/youtube.svg' alt='Youtube Icon' /></a>
            </li>
            <li>
                <a href='https://www.linkedin.com/groups/39757'><img class='' src='https://grails.org/images/linkedin.svg' alt='LinkedIn Icon' /></a>
            </li>
            <li>
                <a href='https://github.com/grails/'><img class='' src='https://grails.org/images/github.svg' alt='Github Icon' /></a>
            </li>
            <li>
                <a href='https://twitter.com/grailsframework'><img class='' src='https://grails.org/images/twitter.svg' alt='Twitter Icon' /></a>
            </li>
        </ul></nav>
        <nav class='partnersnav'><ul>
            <li>Repositories are hosted by
                <a href='https://grails.jfrog.io/'>Artifactory</a>
            </li>
            <li>Website hosting provided by
                <a href="https://aws.amazon.com/">AWS</a>
            </li>
            <li>JetBrains supports the Grails framework with its
                <a href='https://www.jetbrains.com/idea/'>IntelliJ IDEA IDE</a>
            </li>
            <li>YourKit supports the Grails framework with its
                <a href='https://www.yourkit.com/java/profiler/'>Java Profiler</a>
            </li>
            <li>The Grails framework is Open Source
                <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache 2 License</a>
            </li>
             <li>
                <a href='https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=grails'>Security/Vulnerability Information</a>
            </li>
            <li>
                <a href='https://grails.org/buildstatus.html'>Build Status</a>
            </li>
            <li>
                <a href='https://grails.org/privacy-policy.html'>Privacy Policy</a>
            </li>
        </ul></nav>
    </div>
</footer><div>
    <script type='text/javascript'>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-82213539-2', 'auto');
        ga('send', 'pageview');
    </script>
    <script type='text/javascript'>
        adroll_adv_id = "HBWJH4CQCJGS5DJRSB4Z4D";
        adroll_pix_id = "IVEQYFOZXZAPZMDVQH7BFE";
        /* OPTIONAL: provide email to improve user identification */
        /* adroll_email = "username@example.com"; */
        (function () {
            var _onload = function(){
                if (document.readyState && !/loaded|complete/.test(document.readyState)){setTimeout(_onload, 10);return}
                if (!window.__adroll_loaded){__adroll_loaded=true;setTimeout(_onload, 50);return}
                var scr = document.createElement("script");
                var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "https://a.adroll.com");
                scr.setAttribute('async', 'true');
                scr.type = "text/javascript";
                scr.src = host + "/j/roundtrip.js";
                ((document.getElementsByTagName('head') || [null])[0] ||
                    document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
            };
            if (window.addEventListener) {window.addEventListener('load', _onload, false);}
            else {window.attachEvent('onload', _onload)}
        }());
    </script>
</div>
</body>
</html>
